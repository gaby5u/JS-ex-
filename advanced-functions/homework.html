<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced Function Homework</title>
  </head>
  <body>
    <button class="js-start-button">Start</button>
    <br />
    <br />
    <button class="js-cart-button">Add to cart</button>
    <p class="js-confirmation"></p>
    <br /><br />
    <button class="add-button">Add</button>
    <button class="remove-button">Remove</button>
    <script>
      //Part 1
      const add = function () {
        console.log(2 + 3);
      };
      add();
      add();

      function runTwice(fun) {
        fun();
        fun();
      }

      runTwice(function () {
        console.log("12b");
      });
      runTwice(add);

      const startButton = document.querySelector(".js-start-button");
      startButton.addEventListener("click", () => {
        updateButton();
      });

      console.log(startButton);

      function updateButton() {
        startButton.innerHTML = "Loading...";
        setTimeout(() => {
          startButton.innerHTML = "Fineshed!";
        }, 1000);
      }

      let timeoutId;

      document
        .querySelector(".js-cart-button")
        .addEventListener("click", () => {
          addToCart();
        });

      function addToCart() {
        const confirmationText = document.querySelector(".js-confirmation");
        confirmationText.innerHTML = "Added";
        clearTimeout(timeoutId);
        setTimeout(() => {
          confirmationText.innerHTML = "";
        }, 2000);
      }

      let messages = 2;

      document.querySelector(".add-button").addEventListener("click", () => {
        messages++;
        displayNotification();
      });

      document.querySelector(".remove-button").addEventListener("click", () => {
        if (messages > 0) messages--;
        if (messages === 0) stopNotification();
      });

      let intervalId;
      let isDisplayingNotification;

      displayNotification();

      function displayNotification() {
        if (isDisplayingNotification) {
          return;
        }

        isDisplayingNotification = true;

        intervalId = setInterval(() => {
          if (document.title === "App") {
            document.title = `(${messages}) New messages`;
          } else {
            document.title = "App";
          }
        }, 1000);
      }

      function stopNotification() {
        isDisplayingNotification = false;
        clearInterval(intervalId);
        document.title = "App";
      }

      //Part 2
      const multiply = (num1, num2) => num1 * num2;
      console.log(multiply(2, 3));
      console.log(multiply(7, 10));

      const countPositive = (nums) => {
        let k = 0;
        nums.forEach((element) => {
          if (element > 0) k++;
        });
        return k;
      };
      console.log(countPositive([1, -3, 5]));
      console.log(countPositive([-2, -3, -5, 7, 10, 1]));

      const addNum = (array, num) => {
        return array.map((value) => value + num);
      };
      console.log(addNum([1, 2, 3], 2));

      const removeEgg = (foods) => {
        return foods.filter((element) => element !== "egg");
      };
      console.log(removeEgg(["egg", "apple", "egg", "egg", "ham"]));

      const removeFirst2Eggs = (foods) => {
        let k = 0;
        return foods.filter((element) => {
          if (k < 2 && element === "egg") {
            k++;
            return false;
          }
          return true;
        });
      };
      console.log(removeFirst2Eggs(["egg", "apple", "egg", "egg", "ham"]));
    </script>
  </body>
</html>
